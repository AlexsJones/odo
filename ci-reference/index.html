<!DOCTYPE html>
<html>

  <head>

  <!-- Viewing -->
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="website" property="og:type">


  <!-- Descriptions -->
  <meta name="description" content="OpenShift Do
">
  <title>ci-reference</title>


  <!-- Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
  <link rel="manifest" href="/img/manifest.json">
  <link rel="mask-icon" href="/img/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/img/favicon.ico">
  <meta name="msapplication-config" content="/img/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">


  <!-- HLJS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js">
  </script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>

  <!-- ANALYTICS -->
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119021845-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-119021845-1');
  </script>

</head>


  <!-- CSS -->
  <link href="/css/default.css" rel="stylesheet" type="text/css">
  <link href="/css/pilcrow.css" rel="stylesheet" type="text/css">

<body>

  <header>
    <a class="logo" href="/">
      <img class="parcel" src="/img/logo.png" height="30"alt="">
    </a>
    <div class="links">
      <a href="/getting-started">Documentation</a> <a href="https://github.com/openshift/odo" target="_blank">GitHub</a>
    </div>
  </header>

  <div class="content">
    <nav>
      <h3>Documentation</h3>
      <ul>
        
          
            <li><a href="/getting-started/">Getting Started</a></li>
          
        
          
            <li><a href="/installation/">Installation</a></li>
          
        
          
            <li><a href="/examples/">Examples</a></li>
          
        
      </ul>
      <h3>Advanced</h3>
      <ul>
        
          
            <li><a href="/cli-reference/">CLI Reference</a></li>
          
        
      </ul>
      <h3>Development</h3>
      <ul>
        
          
            <li><a href="/development/">Development</a></li>
          
        
          
            <li><a href="/tdd-workflow/">TDD Workflow</a></li>
          
        
          
            <li><a href="/completion-architecture/">Completion Architecture</a></li>
          
        
          
            <li><a href="/logging/">Logging</a></li>
          
        
      </ul>
    </nav>


    <main>

    <h1>ci-reference</h1>
<div class="sect1">
<h2 id="running-integration-test-job-in-travis-ci">Running integration test job in Travis CI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For default oc, use the configuration in <code>.travis.yaml</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">  # Run main e2e tests
    - &lt;&lt;: *base-test
      stage: test
      name: "Main e2e tests"
      script:
        - ./scripts/oc-cluster.sh
        - make bin
        - sudo cp odo /usr/bin
        - oc login -u developer
        - make test-main-e2e</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you need to run <code>odo</code> integration tests against a specific version of Openshift, use env variable <code>OPENSHIFT_CLIENT_BINARY_URL</code> to pass the <a href="https://github.com/openshift/origin/releases">released</a> oc client URL in <code>.travis.yaml</code>. For oc v3.10.0, use the configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">  # Run main e2e tests
    - &lt;&lt;: *base-test
      stage: test
      name: "Main e2e tests"
      script:
        - OPENSHIFT_CLIENT_BINARY_URL=https://github.com/openshift/origin/releases/download/v3.10.0/openshift-origin-client-tools-v3.10.0-dd10d17-linux-64bit.tar.gz ./scripts/oc-cluster.sh
        - make bin
        - sudo cp odo /usr/bin
        - oc login -u developer
        - make test-main-e2e</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-integration-tests-on-prow">Running integration tests on Prow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Prow is the Kubernetes or OpenShift way of managing workflow, including tests. To get tests, you need to raise PR to <code>openshift/release</code> repository setting up appropriate ci operator config and job files. Reference for the same is available in the repository.</p>
</div>
<div class="paragraph">
<p>Note that prow gives you a bare bones cluster, so we need to pre-configure the same so that the cluster is in state expected such as auth being configured and so on.</p>
</div>
<div class="paragraph">
<p>You can do this by running <code>$ make configure-installer-tests-cluster</code> before running actual tests. This script is configurable with environment variables as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CI</code>: If this environment is set, then initial setup is skipped in favor of only configuring authentication. Use this only with OpenShift CI.</p>
</li>
<li>
<p><code>DEFAULT_INSTALLER_ASSETS_DIR</code>: The location where OpenShift installer creates assets such as kube admin password and the kubeconfig file.</p>
</li>
</ul>
</div>
</div>
</div>

    </main>
  </div>
</body>

</html>
